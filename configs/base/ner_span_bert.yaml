task: ner_span
dataset: __DATASET__
model: bert_span_ner
model_name_or_path: __MODEL__
do_train: true
do_eval: true

backend_args:
  max_span_length: 40
  negative_ratio: -1
  max_length: 1024  # CAS1/CAS2 max ~692 tokens
  max_spans: 512
  lstm_hidden_size: 400
  lstm_num_layers: 3
  biaffine_hidden_size: 64
  use_tagger: true
  use_biaffine: true
  use_crf: true
  tagger_weight: 1.0
  biaffine_weight: 1.0
  dropout: 0.4

training:
  output_dir: __OUTPUT_DIR__
  max_steps: 4000
  per_device_train_batch_size: 16
  per_device_eval_batch_size: 16
  learning_rate: 0.001
  bert_learning_rate: 0.00005
  warmup_ratio: 0.1
  gradient_clip: 10.0
  weight_decay: 0.01
  logging_steps: 50
  eval_strategy: steps
  eval_steps: 500
  save_strategy: steps
  save_steps: 500
  save_total_limit: 2
  load_best_model_at_end: true
  metric_for_best_model: eval_f1
  greater_is_better: true
  seed: __SEED__
  bf16: true

predict_args:
  filter_predictions: no_overlapping_same_label
